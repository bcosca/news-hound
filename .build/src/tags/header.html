<news:header tag="cc:sheet">
  <div tag="cc:appbar" class="primary" ref="appbar">
    <a class="title ml-1 mr-auto" href=".">${ document.title }</a>
    <a class="mx-1" href="#" ref="reload"><i class="icon icon-refresh infinite"></i></a>
  </div>
  <div ref="banner"></div>
  <script>
  this.
    once('ready',function() {
      let icon=refs.reload.find('.icon').shift().expose(),
          banner=refs.banner.expose();
      // Show banner at random times (1:3 probability)
      while (banner.firstChild)
        banner.firstChild.remove();
      if (!Math.floor(Math.random()*Math.floor(3)))
        refs.banner.
          addTag('news:banner').
          load();
      this.
        on('icon:spin',function() {
          icon.classList.add('spin');
        }).
        on('icon:stop',function() {
          icon.classList.remove('spin');
        });
      refs.reload.
        on('click',function(e) {
          e.preventDefault();
          props.layout.emit('news:refresh');
        }).
        emit('click');
    });
  </script>
</news:header>
