roadshow.register("news:banner",function(props){return`<news:banner tag="cc:banner" class="reverse">\n  <div class="m-1"><strong>Support further development of ${props.app.brand}. Your donations help keep this project ad-free.</strong></div>\n  <div class="flex m-1">\n    <a tag="cc:button" class="outlined ml-auto mr-1" href="https://www.patreon.com/bePatron?u=20757210" target="_blank">Become a Patron!</a>\n    <a tag="cc:button" class="primary light solid ml-1" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=3VSK6CKUYZRBL&amp;source=url" target="_blank">Donate</a>\n  </div>\n</news:banner>`},function(props,refs){},function(props){return""}),roadshow.register("news:header",function(props){return`<news:header tag="cc:sheet">\n  <div tag="cc:appbar" class="primary" ref="appbar">\n    <a class="title ml-1 mr-auto" href=".">${document.title}</a>\n    <a class="mx-1" href="#" ref="reload"><i class="icon icon-refresh infinite"></i></a>\n  </div>\n  <div ref="banner"></div>\n  \n</news:header>`},function(props,refs){this.once("ready",function(){let icon=refs.reload.find(".icon").shift().expose(),banner=refs.banner.expose();for(;banner.firstChild;)banner.firstChild.remove();Math.floor(Math.random()*Math.floor(3))||refs.banner.addTag("news:banner").load(),this.on("icon:spin",function(){icon.classList.add("spin")}).on("icon:stop",function(){icon.classList.remove("spin")}),refs.reload.on("click",function(e){e.preventDefault(),props.layout.emit("news:refresh")}).emit("click")})},function(props){return""}),roadshow.register("news:item",function(props){return'<news:item tag="cc:card" class="flex p-2 my-2">\n  \n\n\n\n\n  \n</news:item>'},function(props,refs){let desc=props.item.querySelector("description"),photo=props.item.querySelector("content"),pub=new Date(props.item.querySelector("pubDate").textContent),tmp=document.createElement("template");if(tmp.innerHTML=desc.textContent.replace(/<(\/)?ol>/,"<$1ul>").replace(/&nbsp;/g," "),/^ul/i.test(tmp.content.firstElementChild.tagName)){let first=tmp.content.querySelector("li:first-child"),frag=document.createDocumentFragment();for(;first.firstChild;)frag.appendChild(first.firstChild);tmp.content.insertBefore(frag,tmp.content.firstElementChild),first.remove(),tmp.content.querySelector("li:last-child").remove()}tmp.content.querySelectorAll("strong").forEach(function(element){element.remove()}),tmp.content.querySelectorAll("p,ul").forEach(function(element){element.setAttribute("class","small mt-1 mb-0"),element.matches("ul")&&element.classList.add("pl-2")}),tmp.content.querySelectorAll("font").forEach(function(element){element.setAttribute("class","text-muted nobr"),element.removeAttribute("color"),element.parentElement||(element.classList.add("small"),element.innerHTML+=" Â· "+function(time,ref){ref||(ref=(new Date).getTime()/1e3);let diff=time-ref,abs=Math.abs(diff);if(!abs)return"Just now";let unit,when=diff>0?"from now":"ago",units={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60};for(let i in units)if(abs>=units[i])return unit=Math.trunc(abs/units[i]),!/day/.test(i)||unit-1?unit+" "+i+(unit-1?"s":"")+" "+when:diff>0?"tomorrow":"yesterday";return(unit=Math.trunc(abs))+" second"+(unit-1?"s":"")+" "+when}(pub.getTime()/1e3))});let div=document.createElement("div");if(div.setAttribute("class","grow"),div.appendChild(tmp.content),this.expose().appendChild(div),photo){let img=document.createElement("img");img.setAttribute("src",photo.getAttribute("url")),img.setAttribute("width",96),img.setAttribute("height",72),img.style.objectFit="cover",img.setAttribute("class","noflex ml-2"),img.addEventListener("error",function(){img.style.display="none"}),this.expose().appendChild(img)}},function(props){return`a{color:${props.css.foreground(props.theme.surface)};}`}),roadshow.register("news:layout",function(props){return'<news:layout tag="cc:basecoat">\n  <main tag="cc:main" class="col" ref="main">\n    <header tag="news:header" class="top" ref="top"></header>\n    <div tag="cc:progress" class="indeterminate" ref="progress"></div>\n    <div class="container" ref="content"></div>\n  </main>\n  \n\n\n\n\n\n\n\n\n\n\n\n\n  \n</news:layout>'},function(props,refs){document.title=props.app.brand;let self=this;this.once("ready",function(){let progress=refs.progress.expose(),content=refs.content.expose();this.inject({layout:this,main:refs.main,progress:refs.progress}),this.on("news:refresh",function(){for(refs.top.emit("icon:spin"),progress.style.display="block";content.firstChild;)content.firstChild.remove();!function(){let xhr=new XMLHttpRequest;xhr.open("GET","https://news.google.com/rss"),xhr.addEventListener("load",function(){let xml=xhr.responseXML;xml.querySelector("channel>link"),xml.querySelector("lastBuildDate"),xml.querySelectorAll("channel>item").forEach(function(item){content.appendChild(document.createElement("div")),self.getRef(content.lastElementChild).inject({item:item}).addTag("news:item").load()}),progress.style.display="none",refs.top.emit("icon:stop")}),xhr.addEventListener("error",function(){refs.content.addTag("news:offline").load(),progress.style.display="none",refs.top.emit("icon:stop")}),xhr.send()}()})})},function(props){return"html,body{width:480px;scrollbar-color:var(--shaded) transparent;scrollbar-width:thin;}img{background-color:var(--shaded);}p:empty{display:none;}"}),roadshow.register("news:offline",function(props){return'<news:offline class="py-3">\n  <p class="h2 text-center text-muted mb-2">Unable to retrieve the latest news</p>\n  <p class="text-center">Please check your Internet connection.</p>\n</news:offline>'},function(props,refs){},function(props){return""}),roadshow.load({app:{brand:"News Hound"},theme:{primary:"red-700",primaryAlt:"red-a700",secondary:"amber-700",secondaryAlt:"amber-a700"}});

//# sourceMappingURL=app.min.js.map