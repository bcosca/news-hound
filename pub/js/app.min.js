roadshow.register("news:item",function(props){return'<news:item tag="cc:card" class="flex p-2 my-2">\n  \n\n\n\n\n  \n</news:item>'},function(props,refs){let $=roadshow.$,format=window.ICU.format,message=chrome.i18n.getMessage;let desc=$("description",props.item).shift(),photo=$("content",props.item).shift(),pub=new Date($("pubDate",props.item).shift().textContent),tmp=document.createElement("template");if(tmp.innerHTML=desc.textContent.replace(/<(\/)?ol>/,"<$1ul>").replace(/&nbsp;/g," "),/^ul/i.test(tmp.content.firstElementChild.tagName)){let first=$("li:first-child",tmp.content).shift(),frag=document.createDocumentFragment();for(;first.firstChild;)frag.appendChild(first.firstChild);tmp.content.insertBefore(frag,tmp.content.firstElementChild),first.remove(),$("li:last-child",tmp.content).shift().remove()}$("strong",tmp.content).forEach(function(element){element.remove()}),$("p,ul",tmp.content).forEach(function(element){element.setAttribute("class","small mt-1 mb-0"),element.matches("ul")&&element.classList.add("pl-2")}),$("font",tmp.content).forEach(function(element){element.setAttribute("class","text-muted nobr"),element.removeAttribute("color"),element.parentElement||(element.classList.add("small"),element.innerHTML+=" Â· "+function(time,ref){ref||(ref=(new Date).getTime()/1e3);let diff=time-ref,abs=Math.abs(diff);if(!abs)return message("timeNow");let unit,when=message(diff>0?"timeFuture":"timePast"),units={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60};for(let i in units)if(abs>=units[i])return unit=Math.trunc(abs/units[i]),!/day/.test(i)||unit-1?format(when,format(message("time"+i[0].toUpperCase()+i.substring(1)),unit)):message(diff>0?"timeTomorrow":"timeYesterday");return format(when,format(message("timeSecond"),Math.trunc(abs)))}(pub.getTime()/1e3))});let item=this.expose(),div=document.createElement("div");if(div.setAttribute("class","grow"),div.appendChild(tmp.content),item.appendChild(div),photo){let img=this.getRef(item.appendChild(document.createElement("img")));img.attr({src:photo.getAttribute("url"),width:96,height:72,class:"noflex ml-2 cover"}),img.on("error",function(){img.css({display:"none"})})}},function(props){return`a{color:${props.css.foreground(props.theme.surface)};}`}),roadshow.register("news:layout",function(props){return`<news:layout tag="cc:basecoat">\n  <main tag="cc:main" class="col" ref="main">\n    <header tag="cc:sheet" class="top" ref="top">\n      <div tag="cc:appbar" class="primary" ref="appbar">\n        <a class="title ml-1 mr-auto" href=".">${document.title} <small>Version ${props.app.manifest.version}</small></a>\n        <button type="button" class="mx-1" ref="reload"><i class="icon icon-refresh infinite" ref="icon"></i></button>\n      </div>\n    </header>\n    <div tag="cc:progress" class="indeterminate" ref="progress"></div>\n    <div class="container" ref="content"></div>\n    <footer ref="nagger"></footer>\n  </main>\n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n</news:layout>`},function(props,refs){document.title=props.app.brand;let $=roadshow.$,self=this;this.once("ready",function(){window.localStorage,refs.main.expose();let icon=refs.icon.expose(),content=(refs.progress.expose(),refs.content.expose());this.inject({layout:this,main:refs.main,progress:refs.progress}),refs.reload.on("click",function(e){!function(){icon.classList.add("spin"),refs.progress.css({display:"block"}),refs.content.empty(),refs.nagger.empty();let xhr=new XMLHttpRequest;xhr.open("GET","https://news.google.com/rss"),xhr.addEventListener("load",function(){refs.progress.css({display:"none"}),icon.classList.remove("spin"),refs.nagger.addTag("news:nagger").load();let xml=xhr.responseXML;$("lastBuildDate",xml).shift(),$("channel>link",xml).shift(),$("channel>item",xml).forEach(function(item){content.appendChild(document.createElement("div")),self.getRef(content.lastElementChild).inject({item:item}).addTag("news:item").load()})}),xhr.addEventListener("error",function(){refs.content.addTag("news:offline").load(),refs.progress.css({display:"none"}),icon.classList.remove("spin")}),xhr.send()}()}).emit("click")})},function(props){return"html,body{min-width:480px;width:100%;max-width:480px;scrollbar-color:var(--shaded) transparent;scrollbar-width:thin;}img{background-color:var(--shaded);}p:empty{display:none;}.container{transition:opacity .45s linear;}.container:empty{opacity:0;}"}),roadshow.register("news:nagger",function(props){return`<news:nagger>\n  <div class="reverse p-1">\n    <div class="m-1"><strong>Support further development of ${props.app.brand}. Your donations help keep this project ad-free.</strong></div>\n    <div class="flex m-1">\n      <a tag="cc:button" class="outlined ml-auto mr-1" href="https://www.patreon.com/bePatron?u=20757210" target="_blank">Become a Patron!</a>\n      <a tag="cc:button" class="primary light solid ml-1" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=3VSK6CKUYZRBL&amp;source=url" target="_blank">Donate</a>\n    </div>\n  </div>\n</news:nagger>`},function(props,refs){},function(props){return""}),roadshow.register("news:offline",function(props){return'<news:offline class="py-3">\n  <p class="h2 text-center text-muted mb-2">Unable to retrieve the latest news</p>\n  <p class="text-center">Please check your Internet connection.</p>\n</news:offline>'},function(props,refs){},function(props){return""}),window.ICU=window.ICU||{format(){let pos,options,stamp,regex=/\{\s*(\d+)\s*(?:,\s*(\w+)\s*(?:,\s*((?:\w+(?:\s*\{.+?\}\s*,?\s*)?)*)(?:,\s*(.+?))?)?)?\s*\}/g,str=arguments[0],match=regex.exec(arguments[0]);for(;match;){if((pos=parseInt(match[1])+1)in arguments)if(match.length>1&&match[2]){let args=[navigator.language||navigator.userLanguage];switch(match[2]){case"number":if(match.length>2&&match[3])switch(match[3]){case"integer":arguments[pos]=parseInt(arguments[pos]);break;case"currency":options={style:"decimal",maximumFractionDigits:2};break;case"percent":options={style:"percent"}}options&&args.push(options),str=str.replace(match[0],arguments[pos].toLocaleString.apply(arguments[pos],args));break;case"date":if(stamp=new Date(1e3*arguments[pos]),match.length>2&&match[3])switch(options={year:"numeric",month:"numeric",day:"numeric"},match[3]){case"long":options.month="long";break;case"full":options.weekday="long"}options&&args.push(options),str=str.replace(match[0],stamp.toLocaleDateString.apply(stamp,args));break;case"time":stamp=new Date(1e3*arguments[pos]),options=match.length>2&&match[3]&&/long/.test(match[3])?{hour:"2-digit",minute:"2-digit",second:"2-digit"}:{hour12:!1},args.push(options),str=str.replace(match[0],stamp.toLocaleTimeString.apply(stamp,args));break;case"plural":if(match.length>2&&match[3]){let data,pattern=/(\w+)(?:\s*\{\s*(.+?)\s*\})/g,tmp=pattern.exec(match[3]),ord=["zero","one","two"];for(;tmp;){if(arguments[pos]in ord&&tmp[1]==ord[arguments[pos]]||/other/.test(tmp[1])){data=tmp[2].replace("#",arguments[pos]);break}tmp=pattern.exec(match[3])}str=str.replace(match[0],data)}}}else str=str.replace(match[0],arguments[pos]);match=regex.exec(arguments[0])}return str}},roadshow.load({app:{brand:"News Hound",manifest:chrome.runtime.getManifest()},theme:{primary:"red-700",primaryAlt:"red-a700",secondary:"amber-700",secondaryAlt:"amber-a700"}});

//# sourceMappingURL=app.min.js.map